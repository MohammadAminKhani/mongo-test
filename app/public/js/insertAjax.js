// send a form and show its data!
// to have ...
// 2 APIs in one page - at the same time
// use Ajax - to send and receive data - behind the scene

$(function() {

// find1 ajax
  $.getJSON('api', updateShowList)

// insert ajax
$('#insertform').submit(function(e){
  e.preventDefault()

  $.post('api',{
    tourPrice: $('#tourPrice').val(),
    tourDescription: $('#tourDescription').val()
  }, updateShowList)

})

// delete ajax

$('.feedback-messages').on('click',function(e){
  // at 1st get element which exists phisically
  // then communicate with the special icon of special item (items generated by for loop in js)
  // how communicate? with e.target.className
  if(e.target.className == 'delButton'){
    $.ajax({
      url: 'api/' + e.target.id,
      type: 'DELETE'
    })
  }

})

// find2 ajax
  function updateShowList(data) {
   var output = ''

   $.each(data,function(key, item) {
    output += '<div class="feedback-item item-list media-list">'
    output += '<div class="feedback-item media">'
    output += '<div class="media-left">'
    output += '<button class="feedback-delete btn btn-xs btn-danger">'
    output += '<span id="'+ key +'" class="glyphicon glyphicon-remove"></span>'
    output += '</button></div>'
    output += ' <div class="feedback-info media-body">'
    output += ' <div class="feedback-head">'
    output += ' <div class="feedback-title">' + item.title
    output += '<small class="feedback-name label label-info">'
    output += item.name + '</small></div></div>'
    output += '<div class="feedback-messages">' + item.message
    output += '</div></div></div></div>'
   })

   $('.feedback-messages').html(output)
  }


})
